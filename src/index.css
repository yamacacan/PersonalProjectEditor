@tailwind base;
@tailwind components;
@tailwind utilities;

/* Theme CSS Variables */
:root {
  --frame-bg: rgba(15, 23, 42, 0.95);
  --frame-border: rgba(51, 65, 85, 0.5);
  --panel-bg: rgba(30, 41, 59, 0.95);
  --panel-border: rgba(51, 65, 85, 0.5);
  --accent-500: #6366f1;
  --accent-600: #4f46e5;
  --canvas-bg: #0f172a;
  --canvas-dot: #334155;
  --text-main: #ffffff;
  --text-muted: #94a3b8;
}

@layer base {
  * {
    @apply box-border;
  }

  body {
    @apply font-sans antialiased;
    color: var(--text-main);
  }

  ::-webkit-scrollbar {
    @apply w-2 h-2;
  }

  ::-webkit-scrollbar-track {
    @apply bg-surface-100 rounded;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-surface-300 rounded hover:bg-surface-400;
  }
}

@layer components {
  .btn-primary {
    @apply px-4 py-2 bg-primary-500 text-white rounded-lg font-medium hover:bg-primary-600 active:bg-primary-700 transition-all duration-200 ease-out focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2;
  }

  .btn-secondary {
    @apply px-4 py-2 rounded-lg font-medium transition-all duration-200 ease-out focus:outline-none focus:ring-2 focus:ring-offset-2;
    background-color: var(--panel-bg);
    border: 1px solid var(--panel-border);
    color: var(--text-main);
  }

  .btn-secondary:hover {
    @apply bg-white/10;
  }

  .btn-danger {
    @apply px-4 py-2 bg-red-500 text-white rounded-lg font-medium hover:bg-red-600 active:bg-red-700 transition-all duration-200 ease-out focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2;
  }

  .btn-success {
    @apply px-4 py-2 bg-emerald-500 text-white rounded-lg font-medium hover:bg-emerald-600 active:bg-emerald-700 transition-all duration-200 ease-out focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2;
  }

  .input-field {
    @apply w-full px-3 py-2.5 rounded-lg transition-colors duration-200;
    background-color: var(--panel-bg);
    border: 2px solid var(--panel-border);
    color: var(--text-main);
  }

  .input-field::placeholder {
    color: var(--text-muted);
  }

  .textarea-field {
    @apply w-full px-3 py-2.5 rounded-lg resize-none focus:outline-none focus:border-primary-500 focus:ring-0 transition-colors duration-200;
    background-color: var(--panel-bg);
    border: 2px solid var(--panel-border);
    color: var(--text-main);
  }

  .select-field {
    @apply w-full px-3 py-2.5 rounded-lg focus:outline-none focus:border-primary-500 focus:ring-0 transition-colors duration-200 cursor-pointer;
    background-color: var(--panel-bg);
    border: 2px solid var(--panel-border);
    color: var(--text-main);
  }

  .canvas-grid {
    background-image: radial-gradient(circle, #283339 1px, transparent 1px);
    background-size: 30px 30px;
  }

  .glass-panel {
    background: rgba(16, 28, 34, 0.85);
    backdrop-filter: blur(12px);
    border: 1px solid rgba(40, 51, 57, 1);
  }
}

/* Custom Scrollbar for Note Editor */
.note-editor-container .ql-editor {
  @apply overflow-y-auto;
}

.note-editor-container .ql-container {
  @apply h-full text-lg text-slate-200 font-normal;
  border: none !important;
}

.note-editor-container .ql-toolbar {
  @apply bg-slate-900/50 border-slate-700/50 rounded-t-lg !important;
  border-left: none !important;
  border-right: none !important;
  border-top: none !important;
}

/* Toolbar Icons Color */
.note-editor-container .ql-toolbar button,
.note-editor-container .ql-toolbar .ql-picker-label,
.note-editor-container .ql-toolbar .ql-picker-item,
.note-editor-container .ql-toolbar svg .ql-stroke {
  stroke: #94a3b8 !important;
  /* slate-400 */
}

.note-editor-container .ql-toolbar button:hover,
.note-editor-container .ql-toolbar button:hover svg .ql-stroke,
.note-editor-container .ql-toolbar .ql-picker-label:hover,
.note-editor-container .ql-toolbar .ql-picker-label:hover svg .ql-stroke,
.note-editor-container .ql-toolbar .ql-active,
.note-editor-container .ql-toolbar .ql-active svg .ql-stroke {
  stroke: #fff !important;
  color: #fff !important;
}

.note-editor-container .ql-toolbar .ql-picker-options {
  @apply bg-slate-800 border-slate-700 text-white !important;
}

.note-editor-container .ql-editor.ql-blank::before {
  @apply not-italic !important;
  color: var(--text-muted) !important;
}

/* Custom Title Bar Styles */
.title-bar {
  background-color: var(--frame-bg, rgba(15, 23, 42, 0.95));
  border-bottom: 1px solid var(--frame-border, rgba(51, 65, 85, 0.5));
  position: relative;
  z-index: 100;
  backdrop-filter: blur(12px);
  transition: background-color 0.3s ease, border-color 0.3s ease;
}

.title-bar-drag {
  -webkit-app-region: drag;
  user-select: none;
}

.title-bar-no-drag {
  -webkit-app-region: no-drag;
}

.app-logo-small {
  @apply w-6 h-6 rounded-md bg-gradient-to-br from-primary-500 to-primary-600 flex items-center justify-center;
}

.window-control {
  -webkit-app-region: no-drag;
}

.window-control:active {
  @apply bg-white/10;
}

/* Sidebar Styles */
.sidebar {
  @apply flex flex-col transition-all duration-300 ease-out;
  background-color: var(--frame-bg, rgba(15, 23, 42, 0.95));
  border-right: 1px solid var(--frame-border, rgba(51, 65, 85, 0.5));
  position: relative;
  z-index: 50;
  backdrop-filter: blur(12px);
}

.sidebar-collapsed {
  width: 64px;
}

.sidebar-expanded {
  width: 220px;
}

.sidebar-logo {
  @apply flex items-center gap-3 px-4 py-4 overflow-hidden;
}

.sidebar-logo-icon {
  @apply w-9 h-9 rounded-xl bg-gradient-to-br from-primary-500 to-primary-600 flex items-center justify-center flex-shrink-0 shadow-lg shadow-primary-500/25;
}

.sidebar-logo-text {
  @apply text-base font-bold whitespace-nowrap transition-all duration-300;
  color: var(--text-main);
}

.sidebar-divider {
  @apply h-px mx-3 bg-gradient-to-r from-transparent via-white/10 to-transparent;
}

.sidebar-nav {
  @apply flex flex-col gap-1 px-2 py-3;
}

.sidebar-item {
  @apply flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all duration-200 cursor-pointer overflow-hidden relative;
  color: var(--text-muted);
}

.sidebar-item:hover {
  @apply bg-white/5;
  color: var(--text-main);
}

.sidebar-item-active {
  @apply bg-primary-500/15 text-primary-400 !important;
}

.sidebar-item-active:hover {
  @apply bg-primary-500/20;
}

.sidebar-item-icon {
  @apply flex-shrink-0 w-5 h-5 flex items-center justify-center;
}

.sidebar-item-label {
  @apply text-sm font-medium whitespace-nowrap transition-all duration-300 overflow-hidden;
}

.sidebar-item-indicator {
  @apply absolute left-0 top-1/2 -translate-y-1/2 w-1 h-6 bg-primary-500 rounded-r-full;
}

.sidebar-item-muted {
  @apply opacity-50;
}

.sidebar-item-muted:hover {
  @apply opacity-100;
}

.sidebar-bottom {
  @apply px-2 py-3;
}

.sidebar-expand-indicator {
  @apply absolute right-2 top-1/2 -translate-y-1/2 transition-opacity duration-300;
}

/* Sidebar glow effect */
.sidebar::after {
  content: '';
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  width: 1px;
  background: linear-gradient(180deg, transparent, rgba(99, 102, 241, 0.2), transparent);
  pointer-events: none;
}

/* Settings Page Styles */
.settings-section {
  @apply rounded-2xl p-6 mb-6 border;
  background-color: var(--panel-bg);
  border-color: var(--panel-border);
}

.settings-section-title {
  @apply flex items-center gap-2 text-lg font-semibold;
  color: var(--text-main);
}

.settings-section-desc {
  @apply text-sm mt-1;
  color: var(--text-muted);
}

/* Theme Cards */
.theme-card {
  @apply relative flex flex-col items-center p-4 rounded-xl border-2 transition-all duration-200 cursor-pointer;
  background-color: var(--frame-bg);
  border-color: transparent;
}

.theme-card:hover {
  border-color: var(--panel-border);
}

.theme-card-active {
  @apply border-primary-500 bg-primary-500/10 !important;
}

.theme-preview {
  @apply w-full h-16 rounded-lg overflow-hidden flex mb-3;
}

.theme-preview-segment {
  @apply flex-1;
}

.theme-card-name {
  @apply text-sm font-medium;
  color: var(--text-muted);
}

.theme-card-check {
  @apply absolute top-2 right-2 w-5 h-5 bg-primary-500 rounded-full flex items-center justify-center text-white;
}

/* Accent Color Buttons */
.accent-color-btn {
  @apply relative p-1.5 rounded-xl border-2 transition-all duration-200 cursor-pointer;
  background-color: var(--frame-bg);
  border-color: transparent;
}

.accent-color-btn:hover {
  border-color: var(--panel-border);
}

.accent-color-btn-active {
  @apply border-white/50 !important;
}

.accent-check {
  @apply absolute inset-0 flex items-center justify-center bg-black/30 rounded-full;
}

/* Themed Modal Styles */
.themed-modal {
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
}

.themed-modal-overlay {
  @apply fixed inset-0 z-[100] flex items-center justify-center p-4 backdrop-blur-sm;
  background-color: rgba(0, 0, 0, 0.6);
}

.themed-modal {
  @apply relative w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden;
  background-color: var(--panel-bg);
  border: 1px solid var(--panel-border);
}

/* React Quill Theme Overrides */
.note-editor-container .ql-toolbar.ql-snow {
  border-top: none !important;
  border-left: none !important;
  border-right: none !important;
  border-bottom: 1px solid var(--panel-border) !important;
  background-color: var(--frame-bg) !important;
  @apply px-4 py-2;
}

.note-editor-container .ql-container.ql-snow {
  border: none !important;
  @apply text-base;
}

.note-editor-container .ql-editor {
  color: var(--text-main) !important;
  @apply p-6;
}

.note-editor-container .ql-editor.ql-blank::before {
  color: var(--text-muted) !important;
  @apply left-6;
}

.note-editor-container .ql-snow .ql-stroke {
  stroke: var(--text-muted) !important;
}

.note-editor-container .ql-snow .ql-fill {
  fill: var(--text-muted) !important;
}

.note-editor-container .ql-snow .ql-picker {
  color: var(--text-muted) !important;
}

.note-editor-container .ql-snow .ql-picker-options {
  background-color: var(--panel-bg) !important;
  border-color: var(--panel-border) !important;
}

/* Custom Scrollbar for Quill */
.note-editor-container .ql-editor::-webkit-scrollbar {
  width: 6px;
}

.note-editor-container .ql-editor::-webkit-scrollbar-track {
  background: transparent;
}

.note-editor-container .ql-editor::-webkit-scrollbar-thumb {
  background: var(--panel-border);
  border-radius: 10px;
}

.note-editor-container .ql-editor::-webkit-scrollbar-thumb:hover {
  background: var(--primary-500);
}

/* Themed Canvas Styles */
.themed-canvas {
  background-color: var(--canvas-bg);
  background-image: radial-gradient(circle, var(--canvas-dot) 1px, transparent 1px);
  background-size: 20px 20px;
}

.themed-panel {
  background-color: var(--panel-bg);
  border-color: var(--panel-border);
}

/* Canvas animations */
@keyframes fadeIn {
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in {
  animation: fadeIn 0.2s ease-out;
}

.animate-slide-up {
  animation: slideUp 0.3s ease-out;
}